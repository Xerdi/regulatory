\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{definitions}[2022/05/13 Xerdi's Definition Package]
\RequirePackage[sanitize=none]{glossaries}
\setglossarystyle{alttree}

\makeatletter
\newboolean{defs@complete}
\setboolean{defs@complete}{false}
\DeclareOption{complete}{\setboolean{defs@complete}{true}}
\newboolean{defs@external}
\setboolean{defs@external}{false}
\DeclareOption{extern}{\setboolean{defs@external}{true}}
\ProcessOptions
\makeatother

\newboolean{defs@found}
\setboolean{defs@found}{false}

\IfFileExists{../../defs.tex}{
    %! suppress = FileNotFound
    \input{../../defs.tex}
    \setboolean{defs@found}{true}
}{}
\IfFileExists{../defs.tex}{
    %! suppress = FileNotFound
    \input{../defs.tex}
    \setboolean{defs@found}{true}
}{}
\IfFileExists{./defs.tex}{%
    %! suppress = FileNotFound
    \input{./defs.tex}
    \setboolean{defs@found}{true}
}{}

\ifthenelse{\boolean{defs@found}}{%
    \makeglossaries
    \ifthenelse{\boolean{defs@complete}}{\glsaddallunused}{}
    \ifthenelse{\boolean{defs@external}}{\glsdisablehyper}{}
}{}

% Glossary overrides
\renewcommand{\glossarysection}[2][]{}
\renewcommand*{\glsnamefont}[1]{\textmd{\textit{#1}}}
\renewcommand*{\glstextformat}{\textit}

% Macro's
\newcommand{\describe}[1]{\glstarget{#1}{\glsentrydesc{#1}.}}
\newcommand\printdefs[1]{\glssetwidest{#1\quad}\printglossary[nonumberlist]}
